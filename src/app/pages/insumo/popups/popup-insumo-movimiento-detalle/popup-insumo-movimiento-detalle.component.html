<div >
  <app-loading *ngIf="loading"> </app-loading> 
 
</div>


<div class="m-2">
      <p-table  #dt class="m-2" scrollHeight="500px"  tableStyleClass="prime-table" selectionMode="single" [columns]="cols" [value]="elementos"  [(selection)]="elementos" columnResizeMode="expand" [responsive]="true"
    scrollHeight="600px" [scrollable]="true"   >



    <ng-template pTemplate="caption">
        <div class="row d-flex align-items-center">
        <div class="col-5 d-flex content-justify-start" >                                
            <input  class="form-control col-md-12 form-control-sm" type="text"  placeholder="Buscar en toda la tabla" (input)="dt.filterGlobal($event.target.value, 'contains')"  >
        </div>
     
      
    </div>
    </ng-template>

    <ng-template pTemplate="header" let-columns >

            <tr >
                <th  *ngFor="let col of columns" [pSortableColumn]="col.field"  [ngStyle]="{'width': col.width}" >
                    {{col.header}}
                    <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                </th>
                
            </tr>
            <tr>
                  
            <th *ngFor="let col of columns" [ngSwitch]="col.field" >
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'insumo_descripcion'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'cantidad'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'lote'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'fecha_vencimiento'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'insumo_stock_movimiento_fecha_ingreso'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'fecha_modificacion'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'cantidad_original'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'insumo_stock_movimiento_cantidad_usada'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'insumo_stock_movimiento_cantidad_existente'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
                <input class="form-control col-md-12 form-control-sm" *ngSwitchCase="'nombreyapellido'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, col.filterMatchMode)">         
            </th>
        </tr>
        
    </ng-template>


    <ng-template pTemplate="body" let-elementos  >
    <tr style="height:28px">
            <td style="width: 6%" >                   
              <a     (click)="accion($event,op,elementos)"    ><i class="far fa-edit fa-2x icon-color-purple my-hover"></i></a>
          </td>
           
          <td style="width: 15%"><a class="my-hover" (click)="verDetalleCirugia(elementos)">{{elementos.cirugia_id}}</a></td> 
          <td style="width: 30%">{{elementos.insumo_descripcion}}</td>
          <td style="width: 10%">{{elementos.cantidad |number : '1.2-2'}}</td>         
          <td style="width: 20%">{{elementos.lote}}</td> 
          <td style="width: 12%">{{elementos.fecha_vencimiento | date: 'dd/MM/yyyy'}}</td> 
          <td style="width: 20%">{{elementos.insumo_stock_movimiento_fecha_ingreso | date: 'dd/MM/yyyy h:mm:ss'}}</td> 
          <td style="width: 12%">{{elementos.fecha_modificacion | date: 'dd/MM/yyyy'}}</td> 
          <td style="width: 12%">{{elementos.cantidad_original |number : '1.2-2'}}</td> 
          <td style="width: 12%">{{elementos.insumo_stock_movimiento_cantidad_usada |number : '1.2-2'}}</td> 
          <td style="width: 12%">{{elementos.insumo_stock_movimiento_cantidad_existente |number : '1.2-2'}}</td> 
          <td style="width: 20%">{{elementos.nombreyapellido}}</td> 
      
    </tr>

    </ng-template>  
    </p-table>


    <p-overlayPanel #op [showTransitionOptions]="'400ms'" [hideTransitionOptions]="'300ms'"  [dismissable]="true" >                          
    <!--
      <span>   <a class="nav-link azul text-success  my-hover" (click)="verDetalle()">Ver detalle</a></span>   
      <span>   <a class="nav-link azul text-success  my-hover" (click)="cargarMovimiento()">Cargar movimiento</a></span>    -->      
    </p-overlayPanel> 

</div>




